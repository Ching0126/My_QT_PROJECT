# Qt计算器应用

一个基于Qt框架开发的简易计算器应用，支持基本的数学运算功能和窗口自适应。

## 功能特点

- ✅ **数字输入**：支持0-9的数字输入
- ✅ **基本运算**：支持加法(+)、减法(-)、乘法(*)运算
- ✅ **运算优先级**：正确处理先乘后加减的运算顺序
- ✅ **撤销功能**：支持删除最后输入的字符
- ✅ **结果显示**：在输入表达式后显示计算结果
- ✅ **退出功能**：快速退出应用

## 技术实现

- **开发框架**：Qt 6.5.3
- **开发语言**：C++
- **UI设计**：Qt Designer
- **构建工具**：qmake
- **布局管理**：Qt布局系统（QVBoxLayout、QGridLayout）

## 项目结构

```
├── mainwindow.cpp          # 主窗口实现文件
├── mainwindow.h            # 主窗口头文件
├── mainwindow.ui           # 主窗口UI设计文件
├── main.cpp                # 应用入口文件
├── jisuanji.pro            # 项目配置文件
└── readme.md               # 项目说明文档
```

## 安装与运行

### 环境要求

- Qt 6.5.3或更高版本
- MinGW 64位编译器
- Windows 10/11操作系统

### 编译运行

1. 使用Qt Creator打开`jisuanji.pro`项目文件
2. 选择合适的构建套件（推荐MinGW 64-bit）
3. 点击"构建"按钮编译项目
4. 点击"运行"按钮启动应用

## 使用方法

1. **输入数字**：点击数字按钮(0-9)输入数字
2. **选择运算**：点击运算符按钮(+、-、*)选择运算
3. **计算结果**：点击等号(=)按钮获取计算结果
4. **撤销输入**：点击撤销按钮删除最后输入的字符
5. **调整窗口**：拖动窗口边缘调整大小，控件会自动适应
6. **退出应用**：点击退出按钮关闭应用

### 示例运算

- `2 + 3 * 4 =` → 结果：14
- `100 - 50 + 25 =` → 结果：75
- `5 * 5 * 5 =` → 结果：125

## 界面展示

![image-20260112222758911](C:/Users/qiyi/AppData/Roaming/Typora/typora-user-images/image-20260112222758911.png)

## 实现逻辑

### 1. 数字输入处理

```cpp
void MainWindow::SetNumber(int num){
    QString text = ui->textBrowser->toPlainText();
    // 处理数字输入逻辑
    // 根据当前状态添加或替换数字
    // 更新显示和内部数据
}
```

- 使用`SetNumber`函数统一处理所有数字按钮的输入
- 根据当前输入状态决定是添加新数字还是替换现有数字
- 内部使用全局变量`number`跟踪当前输入的数值

### 2. 运算符处理

```cpp
void MainWindow::SetOp(char sop, char sop1, char sop2){
    // 将当前数字添加到数组
    // 处理运算符优先级
    // 更新显示
}
```

- 所有运算符按钮共享同一个处理函数`SetOp`
- 将当前输入的数字保存到`QVector`数组中
- 支持运算符替换（如将+替换为-）

### 3. 计算逻辑

```cpp
void MainWindow::on_pushButton_equal_clicked(){
    // 获取当前输入的数字和运算符
    // 实现先乘后加减的运算优先级
    // 显示计算结果
    // 重置计算状态
}
```

- 实现正确的运算优先级：先处理所有乘法，再处理加减
- 使用临时数组和运算符列表避免修改原始数据
- 确保边界安全，避免数组越界

### 4. 窗口自适应实现

```cpp
void MainWindow::resizeEvent(QResizeEvent *event){
    QMainWindow::resizeEvent(event);
    // 调整布局容器大小以填充整个窗口
    if (ui->verticalLayoutWidget) {
        ui->verticalLayoutWidget->setGeometry(0, 0, 
                                            ui->centralwidget->width(), 
                                            ui->centralwidget->height());
    }
}
```

- 通过重写`resizeEvent`函数实现窗口自适应
- 当窗口大小变化时，自动调整布局容器的大小
- 保持控件的相对位置和比例不变

## 不足与改进之处

### 当前不足

1. **功能限制**：
   - 缺少除法运算
   - 不支持小数点输入
   - 没有括号功能
   - 不支持负数直接输入

2. **用户体验**：
   - 界面比较简单，缺乏美化
   - 没有输入历史记录
   - 不支持键盘输入
   - 没有错误提示（如除零错误）

3. **技术实现**：
   - 部分使用全局变量，代码结构可以优化
   - 错误处理机制不够完善
   - 缺少单元测试

### 改进建议

1. **功能扩展**：
   - [ ] 添加除法运算和小数点功能
   - [ ] 实现括号支持
   - [ ] 添加负数输入支持
   - [ ] 支持科学计数法
   - [ ] 添加常用数学函数（sin、cos、tan、sqrt等）

2. **用户体验优化**：
   - [ ] 美化界面设计，使用现代化风格
   - [ ] 添加输入历史记录功能
   - [ ] 支持键盘输入
   - [ ] 添加错误提示机制
   - [ ] 实现全屏模式

3. **技术改进**：
   - [ ] 重构代码，减少全局变量
   - [ ] 完善错误处理
   - [ ] 添加单元测试
   - [ ] 使用更现代的C++特性
   - [ ] 优化性能

## 许可证

本项目采用MIT许可证，可自由使用和修改。

## 联系方式

如有问题或建议，欢迎联系项目作者。

---

*项目创建日期：2026-01-12*